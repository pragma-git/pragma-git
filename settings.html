<html>
    
<head>
    <title>Settings</title>
    <script src="settings.js"></script>
    <link rel="stylesheet" type="text/css" href="color_styles.css" />
    <link rel="stylesheet" type="text/css" href="settings.css" />
    
    <style> /* Style Tables   */
    
        table{
            border-collapse: collapse;
            text-align:left;
        }
        
            background-color: #444;
     
        th{
            background-color: #444;
            color: #fff;
            border-collapse: collapse;
            text-align:left;
            font-size: 12pt;
            padding: 6px;
        }
        
        tr{
            border-bottom: 2px solid #ccc;
            font-size: 10pt;
        }

        
        td{
            padding: 4px;
        }
    
    
    /*                     */
    /* Style settings-page */
    /*                     */
    
 
        #outer-content{
            margin: 20px;
            margin-top: 140px;
        }

        
        .instructHeader{
            color: var(--header-color);
        }
        .left{
            text-align:left;  
        }
        .right{
            text-align:right;   
        }
    
        
    
     /* Settings : Repo-table */   
            
        /* Repository list */  
        
            .localFolderRadioButton{
                margin-top: 0px;
            }
        
            .localFolder {
              width: 40%;
            }
            
            .remoteURL {
              width: 44%;
            }
            
            .setURL {
              width: 8%;
              text-align:center;
            }   
            
            .repoAction {
              width: 8%;
              text-align:right; 
            } 
        
        
        /* Clone function */   
            .cloneTableRow{
                border-bottom: 0px solid #ccc;
                font-size: 10pt;
            }
            
            .cloneLocalFolder{
                width: 100%;
            }
            
      
        
     /* Settings : Branch-table */       
        
        .hiddenBranch{
            width: 50px;
        } 
        .branchAction {
            width: fit-content;
            text-align:right; 
        }  
        .branchName{
            width: fit-content;
            padding-right: 50px;
        }
        
        .indented{
            padding-left: 50px;
        }
        
    
    
     /* Settings : Text colors */         
        
        .green{
            color: var(--green-text);
        }
        .red{
            color: var(--red-text);
        }
        .grey{
            color: var(--grey-text);
        }
        
        
    
     /* Settings : images */  
                  
        img[src="images/stash_pop.png"],
        img[src="images/stash_pop_black.png"],
        img[src="images/stash_pop_hover.png"]
        {
            filter: var(--stash-icon-filter);
        }
        
        img[src="images/github-mark.png"] 
        {
            filter: none;
        }
        
               
        .stashImg{
            position: relative;
            top: 2px;
        }
        
        .indent{
            position: relative;
            left: 10px;
        }

        
    </style> 


    <!-- Border for dropping folder-->

    <style>
        #addFolder, #cloneFolder, #forkFolder { 
            border-style:  solid;  
            border-width: thin;
        }
        #addFolder.hover,  #cloneFolder.hover,  #forkFolder.hover  { 
            border-style:  dashed;  
            border-width: medium;
        }
    </style>


    
</head> 

<body class='light'>  
       
    <script>                <!-- Dark mode on/off , zoom--> 
        if (localState.dark){
            document.body.classList.add('dark');
        }
        window.document.body.style.zoom = global.state.zoom;
    </script>
    <div id="header">        <!-- Header w tabs  -->                 
        <h2 id="header_Settings" style="display:contents">Settings</h2>
    
            <img id="about-icon" style='vertical-align:middle;position: absolute; right: 20;' height="17" width="17"  
                onclick="let evt = {}; evt.name='Settings';opener._callback('help',evt);" 
                onmouseover="document.getElementById('about-icon').src='images/questionmark_hover.png' " 
                onmouseout="document.getElementById('about-icon').src='images/questionmark_black.png' " 
                src="images/questionmark_black.png" >
    
       <br><br>
            <div class="wrapper">
                <div class="buttonWrapper">
                      <button class="tab-button" data-id="foldableDiv1"  style="border-top-left-radius: 10px;">Repository</button>
                      <button class="tab-button" data-id="foldableDiv4">Branch</button>
                      <button class="tab-button" data-id="foldableDiv2">Software</button>
                      <button class="tab-button" style="border-top-right-radius: 10px;" data-id="foldableDiv3">System Info</button>
                </div>
            </div>
    </div> 

    <div id="outer-content"> <!-- Content  -->   
        

        <div id="inner-content">   
            <div class="content" id="foldableDiv2" style="display:none;">  <!--  SOFTWARE SETTINGS tab -->             
                    
                <h3>Visual</h3>  
                
                    <!--  Dark mode -->
                    Dark mode setting (restart needed): <br>
                    <input type="radio" id="system" name="darkmode" value="system" onclick="_callback('visualModeChanged',this)">
                    <label for="system">System setting</label><br>
                    <input type="radio" id="light" name="darkmode" value="light" onclick="_callback('visualModeChanged',this)">
                    <label for="light">Light mode</label><br>
                    <input type="radio" id="dark" name="darkmode" value="dark" onclick="_callback('visualModeChanged',this)">
                    <label for="dark">Dark mode</label><br><br> 
                       
                    
                    Window behavior : <br>   
                    <!--  Always on top -->
                    <input type="checkbox" id="alwaysOnTop" name="name" value="true" onchange="_callback('checkboxChanged',this)" checked>
                    <label for="alwaysOnTop"> Always on top</label><br>
                       
                    <!--  On all workspaces (Mac and Linux virtual desktops) -->
                    <input type="checkbox" id="onAllWorkspaces" name="name" value="true" onchange="_callback('checkboxChanged',this)" checked>
                    <label for="onAllWorkspaces" id="labelForOnAllWorkspaces"> Show on all workspaces (Mac and Linux)</label><br> 
                    
                    <!--  Tooltip in main window -->
                    <input type="checkbox" id="displayToolTip" name="name" value="true" onchange="_callback('checkboxChanged',this)" checked>
                    <label for="displayToolTip" id="labelForDisplayToolTip"> Show tooltips in main window</label><br><br>  
    
     
                    Window scaling (default = 1.0) : <br>   
                    <!--  Zoom -->
                    <input id="zoomMain" type="text" style="margin-top: 3px" size="4" 
                        onchange="
                            global.state.zoomMain = this.value;
                            opener.saveSettings();
                            opener.win.reload()"
                        />&nbsp;
                    <label for="zoomMain"> Main window</label>
                    
                    <br> 
                    
                    <input id="zoom" type="text" style="margin-top: 3px"  size="4" 
                        onchange=" _callback('zoomChanged',this)"/>&nbsp;
                    <label for="zoom"> Other windows</label>
    
                    <br>
                    <br>
    
                    
                <h3>Git Settings</h3>  
                   
                    <!--  Author info -->
                    <table>            
                      <tr style="border: none;">
                            <td>
                                <label for="authorName"> <sup class="footnoteText">*</sup>Author's name (required) :</label><br>
                                <input id="authorName" type="text" size="30"  oninput="_callback('globalAuthorNameChanged',this)"/>
                            </td>
                            <td>                
                                <label for="authorEmail"> <sup class="footnoteText">*</sup>Author's email  :</label><br>
                                <input id="authorEmail" type="text" size="30"  oninput="_callback('globalAuthorEmailChanged',this)"/>
                            </td>
                        </tr>
                    </table>  
                    <br>
                    
                    
                    <!--  
                        How to implement a new setting
                        ------------------------------
                    
                        - Make a checkbox (or other setting) in this file by copying and edited the code for a checkbox
                        
                        - ´app.js/loadSettings´ : 
                           add loading, and default value for the new setting
                            
                        - ´settings.js/injectIntoSettingsJs´ :
                           set checkbox value for settings dialog
                            
                        - Of course : implement the feature where the setting is taken into considerations (app.js, or elsewhere)
                        
                        
                        Optionally :
                        - If not a checkbox (which automatically updates state variable if you use ´_callback('checkboxChanged',this)´ ), you may need to update state adding a callback in ´settings.js/_callback´
                        - If a direct response on a new setting is wanted, add that into  ´app.js/updateWithNewSettings()´ or in  ´settings.js/_callback´
                        - If something is changed other place than in settings.html dialog, ´app.js/saveSettings´ can be needed to catch and update

                    -->
                    
                                
                    <!--  Force commit before branch change -->

                    <input type="checkbox" id="forceCommitBeforeBranchChange" name="name" value="true" onchange="_callback('checkboxChanged',this)" checked>
                    <label for="forceCommitBeforeBranchChange"> Branch change only when all files are commited</label><br>

                    <!--  --first-parent (search current branch only, if not ff is done, then things get messy) -->
                    <input type="checkbox" id="FirstParent" name="name" value="true" onchange="_callback('checkboxChanged',this)" checked>
                    <label for="FirstParent"> Search and history follow current branch </label><br>
                    
                    <!--  -- remove stash when pressing  () -->
                    <input type="checkbox" id="StashPop" name="name" value="true" onchange="_callback('checkboxChanged',this)" checked>
                    <label for="StashPop"> 
                         Click <img id="StashPop" class="stashImg" height="17" width="auto" src="images/stash_pop.png">
                         both applies and removes stash (<code>git stash pop</code>). Deselect to apply and keep stash ( <code>git stash apply</code>)
                    </label><br><br>
                    
                    
                    <div class="footnoteText">
                        <sup>*</sup> These are global settings. Individual repository setting in 
                        <a style="cursor: pointer;" onclick="
                            Array.from(document.querySelectorAll('button')).find(el => el.textContent === 'Repository').click();
                            Array.from(document.querySelectorAll('button')).find(el => el.textContent === 'Software (this repo)').click();
                        ">
                            "Repository / Software (this repo)"
                        </a> 
                        tab.
                    </div>
                    <br>
                 
                  
                <h3>Git tools (built-in if empty)</h3>  
    
                    <table>
                        <tr style="border: none;">
                            <td>
                                <label for="gitDiffTool"> Diff tool :</label><br>
                                <input id="gitDiffTool" type="text" size="30" />
                            </td>
                            <td>                
                                <label for="gitMergeTool"> Merge tool (often same as diff tool):</label><br>
                                <input id="gitMergeTool" type="text" size="30" placeholder="Name of merge tool"/>
                            </td>
                        </tr>
                        
                        <tr style="border: none;">
                            <td colspan="2">
                                <label for="pathAddition"> Additions to path (add here, if diff, merge, git-lfs, etc are not in system path) : </label><br>
                                <input id="pathAddition" type="text" style="width: 100%;"/><br>
                            </td>
                        </tr>
                    </table>
                    
                    <br>
    
        
            </div>                
            <div class="content" id="foldableDiv1"  style="display:none;"> <!--  REPO SETTINGS tab  --> 
                <h3>Repository table </h3>  
                <table style="width:100%"> <!--  REPOSITORY TABLE -->
                    <thead><tr>
                        <th class=""></th>
                        <th class="localFolder">Local folder</th>
                        <th class="remoteURL">Remote repository ("origin")</th>
                        <th class="testURL"  style="text-align: center">Remote</th>
                        <th class="repoAction"  style="text-align: center">Action</th>
                    </tr></thead>
                    <tbody id="settingsTableBody">
                    </tbody>
                </table>
                <input id = "selectFolderInputButton" 
                    type="file" nwdirectory directory multiple="false"  
                    style='visibility: hidden;' 
                    onchange="_callback('folderSelectButtonPressed',this)" 
                    name="img"/>  <!--  open-folder dialog -- will be used as a tool, and called from settings.js when pressing the generated "Folder" button for cloning--> 
 
 
            <!--  TOOL TABS --> 
 
 
                <div id="toolHeader">    
                    <h3>Tools </h3>
                    <div class="toolWrapper" > 
                        <div class="buttonWrapper">
                              <button id="SoftwareTab" class="tab-button-small" style="border-top-left-radius: 10px;" data-id="thisRepoDiv">Software (this repo)</button>
                              <button id="gitignoreTab" class="tab-button-small" data-id="gitIgnoreDiv">Ignore</button>
                              <button id="cloneTab" class="tab-button-small" data-id="cloneDiv">Clone</button>
                              <button id="forkTab" class="tab-button-small" data-id="forkDiv">Fork</button>
                              <button id="addTab" class="tab-button-small" data-id="addDiv">Add Local</button>
                              <button id="gitHubTab" class="tab-button-small" style="border-top-right-radius: 10px;" data-id="gitHubDiv">Remote</button>
                        </div>
                    </div>
                     
                    
                    <!--  This-repo settings TAB -->
                    
                    <div class="tool-content " id="thisRepoDiv" >  
                        (For selected repository) <br><br>
                        
                        <!--  Author info -->
                        <table>            
                          <tr style="border: none;">
                                <td>
                                    <label for="thisRepoAuthorName"> <sup class="footnoteText">*</sup>Author's name (required):</label><br>
                                    <input id="thisRepoAuthorName" type="text" size="30" oninput="_callback('localAuthorNameChanged',this)" />
                                </td>
                                <td>                
                                    <label for="thisRepoAuthorEmail"> <sup class="footnoteText">*</sup>Author's email :</label><br>
                                    <input id="thisRepoAuthorEmail" type="text" size="30" oninput="_callback('localAuthorEmailChanged',this)"/>
                                    
                                    <input type="checkbox" id="useGlobalAuthorInfo" name="name" value="true" onchange="_callback('useGlobalAuthorInfoCheckboxChanged',this)" checked>
                                    <label for="useGlobalAuthorInfo"> Use global (from Software tab)</label><br>
                                </td>
                            </tr>
                        </table>  
                        
                        <div id='warnThatLocalAuthorInfoMissing' class="red"> WARNING : Will use global Author's info because Author's name is missing</div>
                        

                        
                        <!--  --no-ff merge (gitflow recommends this) -->
                        <input type="checkbox" id="NoFF_merge" name="name" value="true" onchange="_callback('localCheckboxChanged',this)" checked>
                        <label for="NoFF_merge"> Merge keeping history (<code>git merge --no-ff</code>). Deselect to use fast-forward when possible.</label><br>
                        
                        <br>

                        
                        <div class="footnoteText">
                            <sup>*</sup> These settings are specific for the currently selected repository. General settings are found in the 
                            <a style="cursor: pointer;" onclick="
                                Array.from(document.querySelectorAll('button')).find(el => el.textContent === 'Software').click();
                            ">
                                "Software tab"
                            </a> 
                            tab.
                            
                        </div>

                    
                    </div>                   
                    
                    <!--  Clone TAB -->
                    
                    <div class="tool-content " id="cloneDiv" >  
                        (Add repository to list) <br><br> 
                        Clone a remote repository to this computer :
                        <table class="toolTable">
                            <tbody>
                                
                                <tr class="tool">
                                    <td>
                                        <textarea id="urlToClone"  placeholder="URL to clone from"></textarea>
                                    </td>
                                    <td class="toolButtonField">
                                        <button id="testCloneUrl"  class="toolButton" onclick="testURL('urlToClone', {id: 'urlToClone', type: ''})">Test  &nbsp;URL</button>
                                    </td>
                                </tr>
                                
                                
                                <tr class="tool">
                                    <td>
                                        <textarea id="cloneFolder" placeholder="Clone to local folder (type path, use button, or drop folder here) " 
                                            ondrop="_callback('droppedFolder',event)" 
                                            ondragover = "this.className = 'hover'; return false; "
                                            ondragleave = "this.className = ''; return false; "
                                        ></textarea>
                                    </td>
                                    <td class="toolButtonField">
                                        <button id="cloneFolderSelectButton" class="toolButton" onclick="_callback('folderSelectButton',this)">Get Folder</button>
                                    </td>
                                </tr>
                                
                                
                                <tr class="tool">
                                    <td>
                                     <!--  Allow push to remote (This input is saved indirectly when pressing cloneButton ) -->
                                    <input type="checkbox" id="allowPushToRemoteClone" >
                                    <label for="allowPushToRemoteClone"> Allow <code>git push</code>. Enable if you have write access to remote repository, and plan to push.  May require password.</label><br>
                           
                                    </td>                                
                                </tr>
                                
                                
                                <tr class="tool">
                                    <td>
                                        <button id="cloneButton"  onclick="_callback('cloneButtonPressed',this)">Clone</button> &nbsp; <span id="cloneStatus"></span>
                                    </td>                                
                                </tr>
                            
                                
                            </tbody>
                            
                            
                        </table>
                        
                    
                    </div>

                    <!--  Fork TAB -->
                    
                    
                    <div class="tool-content " id="forkDiv" >  
                        (Add repository to list) <br><br> 
                        Fork a remote repository to this computer :
                        <table class="toolTable">
                            <tbody>
                                
                                <tr class="tool">
                                    <td>
                                        <textarea id="urlTofork"  placeholder="URL to fork from"></textarea>
                                    </td>
                                    <td class="toolButtonField">
                                        <button id="testforkUrl"  class="toolButton" onclick="testURL('urlTofork', {id: 'urlTofork', type: ''})">Test  &nbsp;URL</button>
                                    </td>
                                </tr>
                                
                                
                                <tr class="tool">
                                    <td>
                                        <textarea id="forkFolder" placeholder="Fork to local folder (type path, use button, or drop folder here) " 
                                            ondrop="_callback('droppedFolder',event)" 
                                            ondragover = "this.className = 'hover'; return false; "
                                            ondragleave = "this.className = ''; return false; "
                                        ></textarea>
                                    </td>
                                    <td class="toolButtonField">
                                        <button id="forkFolderSelectButton" class="toolButton" onclick="_callback('folderSelectButton',this)">Get Folder</button>
                                    </td>
                                </tr>
                                
                                

                                
                                
                                <tr class="tool">
                                    <td>
                                        <button id="forkButton"  onclick="_callback('forkButtonPressed',this)">Fork</button> &nbsp; <span id="forkStatus"></span>
                                    </td>                                
                                </tr>
                            
                                
                            </tbody>
                            
                            
                        </table>
                        
                    
                    </div>                  
                    
                     <!--  Add TAB -->
                    
                    <div class="tool-content " id="addDiv" >  
                        (Add repository to list) <br><br> 
                        Add local repository from folder on this computer :
                        <table class="toolTable">
                            <tbody>
  
                                <tr class="tool">
                                    <td>
                                        <textarea  id="addFolder" placeholder="Path to local folder (type path, use button, or drop folder here)" 
                                            ondrop = "_callback('droppedFolder',event)" 
                                            ondragover = "this.className = 'hover'; return false; "
                                            ondragleave = "this.className = ''; return false; " 
                                        ></textarea>
                                    </td>
                                    <td class="toolButtonField">
                                        <button id="addFolderSelectButton" class="toolButton" onclick="_callback('folderSelectButton',this)">Get Folder</button>
                                    </td>
                                </tr>

                                
                                <tr class="tool">
                                    <td>
                                        <button id="addRepoButton"  onclick="_callback('addRepoButtonPressed',this)">Add</button>
                                    </td>                                
                                </tr>
                                
                            </tbody>
                        </table>                    
                    </div>   
                    
                    
                    <!--  Remote TAB -->
                                   
                    <div class="tool-content " id="gitHubDiv" > 
                        
                        
                         (For selected repository) <br><br>

                         <!--  Remotes handling dialog -->
                        <div id="additionalRemotesDiv" style="display: block; visibility: visible;">   
                           Remote repositories : &nbsp;&nbsp;&nbsp;
                           
                           
                            <!-- remote dialog range buttons -->
                            <div id="fileRange" style="display:block">
                                <span id='remoteReposDown' style="cursor:pointer; zoom: 0.8;" 
                                    onclick="
                                        remoteRepos.fetch.pos = Math.max( 1, remoteRepos.fetch.pos - 1); 
                                        updateRemoteRepos()
                                        document.getElementById('remoteReposCurrentPos').innerText = remoteRepos.fetch.pos ;"
                                > &#x25C0;</span> 
                                
                                <span id="remoteReposCurrentPos">1</span>  of <span id="remoteReposMax">1</span>
                                
                                <span id='remoteReposUp'   style="cursor:pointer; zoom: 0.8;" 
                                    onclick="
                                        remoteRepos.fetch.pos = Math.min( remoteRepos.fetch.max, remoteRepos.fetch.pos + 1); 
                                        updateRemoteRepos();
                                        document.getElementById('remoteReposCurrentPos').innerText = remoteRepos.fetch.pos ;"
                                > &#x25B6;</span> 
                 
                            </div>
                           
                           
                           <!-- remote dialog textareas-->
                           
                            <table class="toolTable">
                                <tbody>
      
                                    <tr class="tool">
                                        <td  style="width: 20%">
                                            <textarea id="newRepoAliasTextarea" 
                                                placeholder="repo alias" 
                                                onkeyup="_callback('newRepoAliasKeyUp', this);"></textarea>
                                        </td>
                                        
                                        <td style="width: 60%">
                                            <textarea id="additionalRemoteURL" placeholder="URL for remote repository"></textarea>
                                        </td>
                                        
                                        <td class="toolButtonField">
                                            <button id="setRemoteURLButton" class="toolButton" onclick="_callback('setRemoteRepoButton',this)">Set</button>
                                            <button id="newRemoteURLButton" class="toolButton" onclick="_callback('newRemoteRepoButton',this)">Add</button>
                                            <button id="forgetRemoteURLButton" class="toolButton" onclick="_callback('removeRemoteRepoButton',this)">Remove</button>
                                        </td>
                                    </tr>

                                    
                                </tbody>
                            </table>                    
                        </div>
                        
                        

       
                         <!--  Allow push to remote -->
                        <div id="allowToPushDiv">
                            <div id="allowPushDiv">
                                <input type="checkbox" id="allowPushToRemote" 
                                    onchange="_callback('localCheckboxChanged',this)
                                                if (this.checked){
                                                    document.getElementById('autoPushDiv').style.visibility = 'visible';
                                                }else{
                                                    document.getElementById('autoPushDiv').style.visibility = 'collapse';
                                                } 
                                    " 
                                    >
                                <label for="allowPushToRemote"> Allow <code>git push</code>. Disable if you don't have write access</label><br>
                            </div>
                                                    
          
                             <!--  Auto-push to remote -->
                            <div id = 'autoPushDiv'>
                                <input type="checkbox" id="autoPushToRemote" name="name" value="true"  onchange = "_callback('localCheckboxChanged',this);" checked>
                                <label for="autoPushToRemote"> Auto-push to remote, when Store-button clicked (<code>git commit; git push</code>). Deselect to only commit (<code>git commit</code>)</label><br>
        
                            </div>
                        </div>
   
    
                                              
                        <hr>
                                                 
                        <div class="footnoteText">                  
                            <p>
                            <sup>*</sup>      
                                 For remote git services, enter remote URL manually for selected repository. <br>
                                 Format : <code>https://name:password@address</code> 
                                 (for token-based services, exchange name for token-name, and password for token) 
                            </p> 
                             <p>                            
                                 The password, and token, may be left out, and instead stored with the git credential manager.<br>
                                 Format : <code>https://name@address</code>  .
                                 If you have problems, fall back to method above.
                             </p>   
                            
                        </div>
                        
                        
                        <div id="Github-button">Or use Github wizard : 
                            <button onclick="
                                nw.Window.open('Create_github_repository.html', {id: 'githubWindowId', show: false},
                                win=>win.on('loaded', () => {
                                
                                    opener.showWindow(win); // state.onAllWorkspaces=true opens in 1:st workspace. Workaround: creating window hidden (and then show)

                                    win.on('close', function() { opener.fixNwjsBug7973( win)} );
                                    
                                // Close when main window is closed (see https://docs.nwjs.io/en/latest/References/Window/#event-closed )
                                win.on('closed', function () {
                                    win = null;
                                  });
                                
                                  // Listen to main window's close event
                                  nw.Window.get().on('close', function () {
                                    // Hide the window to give user the feeling of closing immediately
                                    this.hide();
                                
                                    // If the new window is still open then close it.
                                    if (win !== null) {
                                      win.close(true);
                                    }
                                
                                    // After closing the new window, close the main window.
                                    this.close(true);
                                  });
                                    
                                    
                                } ));
                                ">
                                <img style='vertical-align:bottom;' height="17" width="17" src="images/github-mark.png" >
                                GitHub
                            </button> 
                        </div>
                        
                      
                    </div>
                                        
                    
                    <!--  Add Gitignore TAB -->    
                    <div class="tool-content " id="gitIgnoreDiv" > 
                         (For selected repository) 
                         <p>
                             <button onclick="nw.Window.open( 'edit_ignore.html',  {id: 'gitignoreWindowId', show: false},
                            win=>win.on('loaded', () => {
                            
                                opener.showWindow(win); // state.onAllWorkspaces=true opens in 1:st workspace. Workaround: creating window hidden (and then show)

                                win.on('close', function() { opener.fixNwjsBug7973( win)} );
                                
                                // Close when main window is closed (see https://docs.nwjs.io/en/latest/References/Window/#event-closed )
                                win.on('closed', function () {
                                    win = null;
                                  });
                                
                                  // Listen to main window's close event
                                  nw.Window.get().on('close', function () {
                                    // Hide the window to give user the feeling of closing immediately
                                    this.hide();
                                
                                    // If the new window is still open then close it.
                                    if (win !== null) {
                                      win.close(true);
                                    }
                                
                                    // After closing the new window, close the main window.
                                    this.close(true);
                                  });
                                
                                
                            }  )) ; 
                            ">  Edit .gitignore</button> 
                         </p>
                         <hr>
                         <b>The current .gitignore file : </b> <br><br>
                         <code id="gitignoreText">test</code>
                          
                    </div>

                               
                    
                </div>
            </div>
            <div class="content" id="foldableDiv4"  style="display:none;"> <!--  BRANCH SETTINGS tab  -->     
                                    
                <h3 style="padding:0">Branches for : "<span id="shortCurrentRepo"></span>"</h3>  
                <span id="currentRepo"></span>      
                
                    
                <!--  BRANCH TABLE -->  
                <table style="width:fit-content;"> 
                    <thead>
                        <tr>
                            <th class="hiddenBranch">Hide</th>
                            <th class="branchName">Branch</th>
                            <th class="branchAction">Action</th>
                        </tr>
                    </thead>
                    <tbody id="branchesTableBody">
                    </tbody>
                </table>    
        
            </div>     
            <div class="content" id="foldableDiv3" style="display:none;">  <!--  SYSTEM INFO  tab --> 

                <h3>Information </h3>



                <div style='float:right; position: relative; top: 0px;'>
 
                    <!--  Star button from GitHub -->
                    Give Pragma-git a star : <br><br>
                    <button onclick="require('nw.gui').Shell.openExternal( 'https://github.com/pragma-git/pragma-git/' );return false;">
                         <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star d-inline-block mr-2">
                            <path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z"></path>
                        </svg>
                        Star
                    </button>
                    
                    <br>

                    <br><br>
                    
                    
                    Feedback: 
                    <br><br> 
                    
                    <!--  Report Issues GitHub -->  
                    <a href='https://github.com/pragma-git/pragma-git/issues/new/choose' 
                       style="padding: 10px; padding-left: 0px;"
                       onclick="require('nw.gui').Shell.openExternal( this.href );return false;" >
                       Report bugs / requests </a>

                    
                    <!--  List Issues GitHub -->  
                    <br><br>
                    <a href='https://github.com/pragma-git/pragma-git/issues' 
                       style="padding: 10px; padding-left: 0px;"
                       onclick="require('nw.gui').Shell.openExternal( this.href );return false;" >
                       Known issues </a>


                    <br><br> 

                       
                </div>
                
                Pragma-git version:
                <div class='indent'><code><span id='version' style="font-size: 9pt;"></span>  </code>  </div><br>
                
                
                Latest available version:
                <div class='indent'><code><span id='latestVersion' style="font-size: 9pt;"></span>  </code> 
                    <a href='https://github.com/pragma-git/pragma-git/releases/latest' style="font-size:11" onclick="require('nw.gui').Shell.openExternal( this.href );return false;">[Download page]</a>
                </div><br>
                
                
                nwjs version:
                <div class='indent'><code><span id='nw-version' style="font-size: 9pt;"></span>  </code>  </div><br>
                
                
                
                node version:
                <div class='indent'><code><span id='node-version' style="font-size: 9pt;"></span>  </code>  </div><br>
                
                
                Platform:
                <div class='indent'><code><span id='platform' style="font-size: 9pt;"></span>  </code>  </div><br>
                

                Git version:
                <div class='indent'><code><span id='gitVersion' style="font-size: 9pt;"></span>  </code>  </div><br>
                
                
                Settings folder:
                <div class='indent'><code><span id='SettingsDir' style="font-size: 9pt;"></span>  </code>  </div>
                <script>
                     document.getElementById("SettingsDir").innerHTML = opener.getSettingsDir(); 
                </script>    
                 <br>          
                
                

                Log file:
                <div  class='indent'><code><a href="#" id='logFile' style="cursor:pointer;font-size:11"  onclick="gui.Shell.openItem( path.resolve(document.getElementById('logFile').innerText) ); "> </a>  </code></div>
                <script>
                     document.getElementById("logFile").innerText = opener.getSettingsDir() + pathsep + '.tmp' + pathsep + 'pragma-git-log.txt';
                </script>  
                <br>  
                       

                
                Your system's path as seen by Pragma-git :
                <div class='indent'><code><span id='path' style="font-size: 9pt;"></span>  </code>  </div>
                <br>
                  

                Your gitconfigs :
                <div  class='indent'><div id='gitconfigs' style="font-size: 9pt"></div>  </div>
                <br>
                
                                
                License:
                <div class='indent'><a href="#" onclick="window.open('License.html','name','width=800,height=600')" style="cursor:pointer;font-size:11"  >MIT license</a></div>
                

            </div>
        </div><!-- inner-content --> 
    </div><!-- content --> 

    <!-- Dialogs  -->   
    <dialog id="alertDialog"  class="error">               <!--  General alert dialog  --> 
        <p> 
            <div id='alertTitle'></div><br>  
            <div id='alertMessage'></div>  
        </p>  
        <button id="no"
            onclick="document.getElementById('alertDialog').close();selectedBranch='';">
            OK
        </button>  
    </dialog>  
    <dialog id="deleteBranchDialog"  class="error">         <!--  Warning dialog for delete branch  -->  
        <p>This will delete your local branch.<br>  
            Do your really want to remove the branch? 
        </p>  
        <button id="yes" 
            onclick="document.getElementById('deleteBranchDialog').close();_callback('deleteBranchClicked',selectedBranch);">
            Delete
        </button>   
        <button id="no"
            onclick="document.getElementById('deleteBranchDialog').close();selectedBranch='';">
            Cancel
        </button>  
    </dialog>  
    <dialog id="forceDeleteBranchDialog"  class="error">        <!--  Warning dialog for force-delete branch  --> 
        <p>The branch was not fully merged.  This means that there is work that will get lost when you delete the branch.  <br>
            Delete the branch and lose non-merged work? 
        </p>  
        <button id="yes" 
            onclick="document.getElementById('forceDeleteBranchDialog').close();_callback('forceDeleteBranchClicked',selectedBranch);">
            Delete and loose
        </button>   
        <button id="no"
            onclick="document.getElementById('forceDeleteBranchDialog').close();selectedBranch='';">
            Cancel
        </button>  
    </dialog>   
    <dialog id="doYouWantToInitializeRepoDialog"   class="warning">  
        <b>WARNING</b> -- Do you want to initialize this folder as a git repository ?
             <br>
            <br>
            
        Start working in branch &nbsp; 
        <select id="firstBranchToWorkOn" name="firstBranchToWorkOn" >
            <option  id="defaultBranchName" value="master">master_</option>
            <option value="develop" selected>develop</option>
        </select> <br>
            <br>
        
        <button id="initializeRepoDialogOK" 
            onclick="document.getElementById('doYouWantToInitializeRepoDialog').close();_callback('initializeRepoOK', {firstBranch : document.getElementById('firstBranchToWorkOn').value });">
            Initialize
        </button>   
        <button id="initializeRepoDialogCancel" 
            onclick="document.getElementById('doYouWantToInitializeRepoDialog').close();localState.droppedRepoFolder=''; "> <!-- Forget dropped folder -->  
            Cancel
        </button>    

    </dialog>  
     
    <!-- Scripts  -->       
    <script>  <!--  Store selectedBranch used in dialog   -->
        var selectedBranch;  // Will be set when clicking "Delete" (which is a dynamically generated link, created from javascript)
    </script>
    <script>  <!--  Tab functionality-->   
        const tabs = document.querySelector(".wrapper");
        const tabButton = document.querySelectorAll(".tab-button");
        const myContents = document.querySelectorAll(".content");
        
        
        const toolTabs = document.querySelector(".toolWrapper");
        const toolTabButton = document.querySelectorAll(".tab-button-small");
        const toolMyContents = document.querySelectorAll(".tool-content");
        
        
        
        // Hide all 
        myContents.forEach(cnt => {
          cnt.style.display='none';
          cnt.style.visibility='none';
        });   
        
        
        // Set TAB event listener
        tabs.onclick = e => {
        
            const id = e.target.dataset.id;
            if (id) {
                tabButton.forEach(btn => {
                    btn.classList.remove("active");
                });
                e.target.classList.add("active");
                
                //const element = document.getElementById(id);
                //element.classList.add("active");
                
                myContents.forEach(cnt => {
                    cnt.style.display='none';
                    cnt.style.visibility='none';
                });           
                document.getElementById(id).style.display='contents';
                document.getElementById(id).style.visibility='visible';
                
                // Read tab into state
                state.settingsWindow.selectedTab = 0;  // First tab default
                for (i = 0; i < tabButton.length; i++) {
                    if ( tabButton[i].classList[1] == 'active'){
                        state.settingsWindow.selectedTab = i;
                    }
                }
            }
        }
        
        
        // Set Toolbar-TAB event listener
        toolTabs.onclick = e => {
        
            let id = e.target.dataset.id;
            if (id) {
                toolTabButton.forEach(btn => {
                    btn.classList.remove("active");
                });
                e.target.classList.add("active");

                
                toolMyContents.forEach(cnt => {
                    cnt.style.display='none';
                    cnt.style.visibility='none';
                });    
     
                document.getElementById(id).style.display='block';
                document.getElementById(id).style.visibility='visible';
            }
        }
        
    </script>
    <script>  <!--  Event listeners (load and unload of document  --> 
        window.addEventListener('DOMContentLoaded', (event) => {
            console.log('settings.html :DOM fully loaded and parsed');
            injectIntoSettingsJs(document);
            }
        );
        window.addEventListener('unload', (event) => {
            console.log('settings.html :DOM fully unloaded -- maybe window closed ');
            closeWindow(window);
            }
        );
    
    </script>
    
    
        
    <!-- Drop folder initiate script-->    
    <script>
    
        //Same as $(document).ready();
        function ready(fn) {
            if (document.readyState != 'loading'){
                fn();
            } else {
                document.addEventListener('DOMContentLoaded', fn);
            }
        }
    
        //When the page has loaded, run this code
        ready( function(){
            // prevent default behavior from changing page on dropped file
            window.ondragover = function(e) { e.preventDefault(); return false };
            
            // NOTE: ondrop events WILL NOT WORK if you do not "preventDefault" in the ondragover event!!
            window.ondrop = function(e) { e.preventDefault(); return false };
            
                        
            // Set default branch-name
            opener.registerDefaultBranch(document);

        });
    </script>

    
   
</body>

</html>
