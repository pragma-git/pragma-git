<!DOCTYPE html>
<html>
  <head>

    <meta name="viewport" content="user-scalable=1.0,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Notes</title>

        <script src="notes.js"></script>
    
      <!-- Editor's Dependecy Style -->

        <link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css" />
        <link rel="stylesheet" href="node_modules/@toast-ui/editor/dist/toastui-editor.css" />
        
        <link rel="stylesheet" type="text/css" href="color_styles.css" />
        
        

 <style>
    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
    }  
    
    #editor{
        margin-top: -2px  /* I get scrollbars in window otherwise, because a build-in 1px border around editor. */
    }  
    
    
    .tui-editor-contents h1, 
    .tui-editor-contents h2,  
    .tui-editor-contents h3, 
    .tui-editor-contents  h4
    {
        background: var(--body-background);
        color: var(--header-color);
    }
    
    /* modify toast-ui  general */ 
    span, 
    .te-editor, 
    .tui-editor-contents h5,  
    .tui-editor-contents h6,   
    .tui-editor-contents ul,  
    .tui-editor-contents ol,  
    .tui-editor-contents li, 
    .tui-editor-contents h6, 
    .tui-editor-contents p,  
    .tui-editor-contents table,  
    .tui-editor-contents dir, 
    .CodeMirror, 
    .te-md-container, 
    .tui-md-table.tui-md-marked-text,
    .tui-md-heading1,
    .tui-md-heading2, 
    .tui-md-heading3,
    .tui-md-heading4,
    .tui-md-heading5,
    .tui-md-heading6,
    .tui-md-list-item
    {
        background: var(--body-background);
        color: var(--body-text);
    }
    
    /* modify toast-ui  code */ 
    .tui-editor-contents pre,
    .tui-editor-contents code,
    .tui-md-code,
    .tui-md-code-block,
    .tui-md-code.tui-md-marked-text,
    .tui-md-code-block.CodeMirror-linebackground 
    {
        background-color: var(--code-background);
        color: var(--notes-code-text);
    }
    
    /* markdown */
    .tui-md-code,
    .tui-editor-contents .te-preview-highlight::after,
    .tui-editor-contents th.te-preview-highlight,
    .tui-editor-contents td.te-preview-highlight
     {
        background-color: rgba(255, 245, 131, 0.15);
    }
    
    .tui-md-heading    
    {
        color: var(--header-color);
    }

    .outer-content {
        width: 100%;
        height: 100%;
    }
    
    .code-block-header {
        visibility: hidden; /* Hide pop-up code block editor buttons -- equally good to edit without pop-up */
    }
    
     /* search field */   
    .find-in-nw-current, .find-in-nw-count, .find-in-nw-of{
        background: none;
        color: black;
        font-size: none;
    }
 
 </style>


  </head>
  
  <body class='light'>
    <!-- Dark mode on/off, zoom --> 
    <script>
        if (global.localState.dark){
            document.body.classList.remove('light');
            document.body.classList.add('dark');
        }
        window.document.body.style.zoom = global.state.zoom;
    </script>


<!--
     From https://nhn.github.io/tui.editor/latest/
-->
<div class="outer-content">
        <div id="editor"></div>
</div>    

    <!-- 
    NOTE: @toast-ui/editor/dist/toastui-editor.js  fails scroll  
    
    Example01 on web works fine.  Therefore, figured out that downloading toastui-editor-all.js 
    from  "https://nhn.github.io/tui.editor/latest/tutorial-example01-editor-basic/../dist/cdn/toastui-editor-all.js"
    was the solution.
    
    Save downloaded file as : "lib/toastui-editor-all.js"
    
    Since I don't think this is a module, I have to load it from the HTML page, instead of using require.  
    
    -->

    <!-- DOWNLOAD latest toastui-editor-all.js  like this :
    cd ~/Documents/Projects/Pragma-git/Pragma-git/lib
    wget --remote-encoding='UTF-8' 'https://nhn.github.io/tui.editor/latest/tutorial-example01-editor-basic/../dist/cdn/toastui-editor-all.js'
     -->
        
    <script src="lib/toastui-editor-all.js"></script>



<!--
    <script src="https://nhn.github.io/tui.editor/latest/tutorial-example01-editor-basic/../dist/cdn/toastui-editor-all.js"></script>
-->

 
    <!--  Onload, call javascript file  --> 
    <script>
        const Editor = toastui.Editor;
        
        window.addEventListener('DOMContentLoaded', (event) => {
            
            // Start javascript
            console.log('notes.html :DOM fully loaded and parsed');
            injectIntoNotesJs(document);
            
            // Events for switch between Markdown and MouseOver
            document.getElementsByClassName('te-switch-button')[0].addEventListener('mouseover', (event) => {
                console.log('notes.html : Mouse over');
                findInNw.clearTokens();   // Clear all <mark> inserted in html 
                findInNw.hideSearchBox(); // Hide search
                }
            );
            document.getElementsByClassName('te-switch-button')[1].addEventListener('mouseover', (event) => {
                console.log('notes.html : Mouse over');
                findInNw.clearTokens();  // Clear all <mark> inserted in html 
                findInNw.hideSearchBox();// Hide search
                }
            );
            
            
        });
        
        // Close 
        window.addEventListener('unload', (event) => {
            console.log('notes.html :DOM fully unloaded -- maybe window closed ');
            closeWindow(window);
            }
        );

    </script> 
        
    <!--  Add find  -->    
    <script src="node_modules/findinnw/dist/find-in-nw.js"></script>
    <script src="extend_find-in-nw.js"></script>
    <script>
        findInNw.initialize();
        extendFindInNw(); // Make find-in-nw fit my purpose for graph and note
    </script> 


  </body>
</html>
